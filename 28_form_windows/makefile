###############################################################################
# compiler setting
###############################################################################
DIR     = $(shell pwd)
CC      = gcc
CFLAGS  = -g -Wall
LIBS    = -lm -lncurses -lform
INCPATH =

###############################################################################
# source files setting
###############################################################################
C_SOURCES = $(shell find . -name "*.c")
C_OBJS    = $(patsubst %.c,%.o,$(wildcard $(C_SOURCES)))
OBJS      = $(C_OBJS)
EXEC      = $(shell basename $(DIR))

###############################################################################
.PHONY : clean clean_all
###############################################################################
all: $(EXEC)

%.o:%.c
	$(CC) -c $(CFLAGS) $(INCPATH) $< -o $@

$(EXEC): $(OBJS)
	$(CC) $(OBJS) -o $(EXEC) $(LIBS)

###############################################################################
clean:
	@rm -vfr $(OBJS)
clean_all: clean
	@rm -vfr $(EXEC)
###############################################################################
